<html>
<head>

<script>
function ajaxSend(url, postdata, callback) {
  var xhr = new XMLHttpRequest();
//   var params = 'orem=ipsum&name=binny';
  xhr.open('POST', url);

  // Send the proper header information along with the request
//   xhr.setRequestHeader('Content-type', 'multipart/form-data');
//   xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
  xhr.setRequestHeader('Content-type', 'application/json');

  xhr.addEventListener('load', function() {
    callback(this.responseText);
  });
  xhr.send(postdata);
  return false;
}

function doSubmit() {
  var inputs = document.querySelectorAll('#simpleForm input');

  var data = {}
  inputs.forEach(function(field) {
    data[field.name]=field.value;
  });

  ajaxSend('/processForm', JSON.stringify(data), displayResult)
}

function displayResult(result) {
  var el = document.querySelector('#formResult');
  el.innerHTML = result;
}

</script>

</head>
<body>
<h1>SpringBoot Microservice Starter</h1>

<h2>Simple request</h2>
<a href="/hello">Hello</a>

<h2>Sample form post (using ajax)</h2>
<div id="simpleForm">
  <div>
    Name: <input type="text" name="name" size="30" maxlength="30"/> 
    Age: <input type="text" name="age" size="2" maxlength="2" value=""/>
    <button onClick="doSubmit()">Submit</button>
  </div>
  Result: <span id="formResult">-</span>
</div>
</body>
</html>
